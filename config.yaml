# doc-scraper Configuration File
# LLM Documentation Scraper - C++ Implementation

# Global Settings
default_delay_per_host: 500ms
num_workers: 8
num_image_workers: 4
max_requests: 100
max_requests_per_host: 10
output_base_dir: "./crawled_docs"
state_dir: "./crawler_state"
max_retries: 3
initial_retry_delay: 1s
max_retry_delay: 30s
semaphore_acquire_timeout: 60s
global_crawl_timeout: 0  # 0 = unlimited

# Image handling defaults
skip_images: false
max_image_size_bytes: 10485760  # 10MB

# Output options
enable_output_mapping: true
output_mapping_filename: "url_mapping.tsv"
enable_metadata_yaml: true
metadata_yaml_filename: "crawl_metadata.yaml"
enable_jsonl: true
enable_structured_json: false

# HTTP client settings
http_client_settings:
  timeout: 30s
  max_idle_conns: 100
  max_idle_conns_per_host: 10
  idle_conn_timeout: 90s

# LLM Guidance (optional, requires API key)
llm_guidance:
  enabled: false
  api_endpoint: "https://api.openai.com/v1/chat/completions"
  api_key_env: "OPENAI_API_KEY"
  model: "gpt-4o-mini"
  max_suggestions: 5
  relevance_threshold: 0.7
  crawl_objective: "Extract comprehensive documentation"

# Site Configurations
sites:
  # Example: Python documentation
  python_docs:
    start_urls:
      - "https://docs.python.org/3/"
    allowed_domain: "docs.python.org"
    allowed_path_prefix: "/3/"
    content_selector: "auto"  # Auto-detect framework
    max_depth: 3
    delay_per_host: 500ms
    skip_images: false
    respect_nofollow: true
    enable_output_mapping: true
    enable_metadata_yaml: true

  # Example: Flask documentation  
  flask_docs:
    start_urls:
      - "https://flask.palletsprojects.com/en/latest/"
    allowed_domain: "flask.palletsprojects.com"
    allowed_path_prefix: "/en/latest/"
    content_selector: "auto"
    max_depth: 5
    delay_per_host: 300ms
    skip_images: true

  # Example: Local test site (for development)
  test_site:
    start_urls:
      - "http://localhost:8080/docs"
    allowed_domain: "localhost"
    allowed_path_prefix: "/docs"
    content_selector: "main, article, .content"
    max_depth: 2
    delay_per_host: 100ms
    skip_images: true
